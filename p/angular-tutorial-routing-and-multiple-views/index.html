<!DOCTYPE html><html class="nprogress-busy"><head><meta charset="utf-8"><meta name="google-site-verification" content="ekuL5J7xK1IdFtP13v3KxpuGKnYS1oCT9PvZdjYm8Eg"><meta name="viewport" content="user-scalable=no,width=device-width,initial-scale=1,maximum-scale=1"><link rel="shortcut icon" type="image/png" href="/static/favicon.png"><link rel="apple-touch-icon" sizes="200x200" href="/static/favicon-iphone.png"><title>wxsm's space - Angular æ•™ç¨‹ï¼šå¤šé¡µé¢ä¸è·¯ç”±</title><meta name="description" content="wxsms's personal blog."><meta name="keywords" content="Blog,JavaScript,HTML,CSS,Vue,Bootstrap"><link href="/static/css/app.c460d3b13d6d7ce0c63faa74a9023a8f.css" rel="stylesheet"><script type="text/javascript" src="/static/js/manifest.68263eefe155d055bfa0.js"></script><script type="text/javascript" src="/static/js/vendor.19a2875ac58b9bf76cc9.js"></script><script type="text/javascript" src="/static/js/app.6317672e36f60ab5ad32.js"></script><script async="" src="https://www.google-analytics.com/analytics.js" charset="utf8"></script><script async="" src="https://www.google-analytics.com/analytics.js" charset="utf8"></script><script type="text/javascript" charset="utf-8" async="" src="/static/js/0.24af7fe1e27d3b16bd28.js"></script><script type="text/javascript" charset="utf-8" async="" src="/static/js/4.f6eaab3002dc8add016f.js"></script><script type="text/javascript" charset="utf-8" async="" src="/static/js/0.24af7fe1e27d3b16bd28.js"></script><script type="text/javascript" charset="utf-8" async="" src="/static/js/1.3d038e42bb029d58fb1c.js"></script><script type="text/javascript" async="" id="embed-disqus" data-timestamp="1539144411840" src="//wxsm.disqus.com/embed.js"></script><link rel="prefetch" href="https://c.disquscdn.com/next/embed/styles/lounge.d797d52db05c56e7ec33542889f90bca.css"><link rel="prefetch" href="https://c.disquscdn.com/next/embed/common.bundle.18932c85febf9520158697cdc31f08ae.js"><link rel="prefetch" href="https://c.disquscdn.com/next/embed/lounge.bundle.ab905f052ba8af95ba7fd0785f080e6d.js"><link rel="prefetch" href="https://disqus.com/next/config.js"></head><body><section id="app"><section data-v-6a2c05ce="" style="display: none;"></section> <aside data-v-0044a876="" class=""><div data-v-0044a876="" class="brand"><h4 data-v-0044a876="" class="brand-link"><a data-v-0044a876="" href="/" class="router-link-active">wxsm's space</a></h4></div> <div data-v-0044a876="" class="search-container"><form data-v-e01410e2="" data-v-0044a876="" class="form-inline search-form-box"><div data-v-e01410e2="" class="form-group"><input data-v-e01410e2="" type="search" placeholder="Search..." required="required" minlength="2" class="form-control"></div></form></div> <div data-v-0044a876="" class="nav-container"><div data-v-0044a876="" class="nav-div"><ul data-v-0044a876="" role="tablist" class="nav nav-pills nav-stacked"><li data-v-0044a876="" role="presentation"><a data-v-0044a876="" href="/p" class="router-link-active btn btn-link" role="button">Archive</a></li><li data-v-0044a876="" role="presentation"><a data-v-0044a876="" href="/t" class="btn btn-link" role="button">Tags</a></li><li data-v-0044a876="" role="presentation"><a data-v-0044a876="" href="/g" class="btn btn-link" role="button">Guestbook</a></li><li data-v-0044a876="" role="presentation"><a data-v-0044a876="" href="/a" class="btn btn-link" role="button">About</a></li></ul></div> <!----></div></aside> <section data-v-79039cdb="" class="page"><div data-v-79039cdb="" class="page-body"><button data-v-01aba251="" data-v-79039cdb="" type="button" class="navbar-toggle collapsed"><span data-v-01aba251="" class="sr-only">Toggle navigation</span> <span data-v-01aba251="" class="icon-bar"></span> <span data-v-01aba251="" class="icon-bar"></span> <span data-v-01aba251="" class="icon-bar"></span></button> <div data-v-79039cdb="" class="container-fluid"><div data-v-79039cdb="" class="row"><div data-v-79039cdb="" class="col-xs-12"><section data-v-f233b600="" data-v-79039cdb=""><h1 data-v-f233b600="">Angular æ•™ç¨‹ï¼šå¤šé¡µé¢ä¸è·¯ç”±</h1> <section data-v-f233b600="" id="post-content"><section data-v-19e352bd="" data-v-f233b600=""><div data-v-19e352bd="" class="meta-block"><i data-v-19e352bd="" class="glyphicon glyphicon-calendar"></i> <span data-v-19e352bd="">December 28, 2015</span></div> <div data-v-19e352bd="" class="meta-block"><a data-v-3cd447cb="" data-v-19e352bd="" href="/t#AngularJs" class="label-tag"><span data-v-3cd447cb="" class="label label-danger">AngularJs</span></a><a data-v-3cd447cb="" data-v-19e352bd="" href="/t#Router" class="label-tag"><span data-v-3cd447cb="" class="label label-default">Router</span></a></div></section> <div data-v-f233b600=""><p>åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨å¸ƒå±€æ¨¡ç‰ˆä»¥åŠé€šè¿‡Angularçš„<code>ngRoute</code>æ¨¡å—æ¥ç»™åº”ç”¨æ·»åŠ è·¯ç”±åŠŸèƒ½ã€‚</p>
<ul>
<li>å½“ä½ ç°åœ¨è®¿é—®<code>app/index.html</code>çš„æ—¶å€™é¡µé¢è¢«é‡å®šå‘åˆ°äº†<code>app/index.html/#/phones</code>ï¼Œå¹¶ä¸”æ‰‹æœºåˆ—è¡¨å°†åœ¨æ­¤å±•ç¤º</li>
<li>å½“ä½ ç‚¹å‡»å…¶ä¸­ä¸€æ¡æ‰‹æœºé“¾æ¥çš„æ—¶å€™ï¼Œæµè§ˆå™¨å°†æ˜¾ç¤ºä¸€ä¸ªæ‰‹æœºè¯¦ç»†ä¿¡æ¯é¡µé¢ï¼ŒåŒæ—¶URLç›¸åº”åœ°æ›´æ–°</li>
</ul>
<p>æœ€é‡è¦çš„æ”¹åŠ¨å¦‚ä¸‹æ‰€ç¤ºã€‚ä½ å¯ä»¥åœ¨<a href="https://github.com/angular/angular-phonecat/compare/step-6...step-7" title="See diff on Github">GitHub</a>ä¸ŠæŸ¥çœ‹å®ƒä¸ä¹‹å‰çš„ä»£ç æœ‰ä½•åŒºåˆ«ã€‚</p>
<hr>
<h2 id="">ä¾èµ– <a class="header-anchor" href="#" aria-hidden="true">ğŸ”—</a></h2>
<p>è¿™ä¸€æ­¥ä¸­æ·»åŠ çš„è·¯ç”±åŠŸèƒ½æ˜¯ç”±Angularçš„<code>ngRoute</code>æ¨¡å—æä¾›çš„ï¼Œè¯¥æ¨¡å—æ²¡æœ‰åŒ…å«åœ¨Angularæ¡†æ¶çš„æ ¸å¿ƒå†…å®¹ä¸­ã€‚ æˆ‘ä»¬ä½¿ç”¨<a href="http://bower.io/">Bower</a>æ¥å®‰è£…å®¢æˆ·ç«¯ä¾èµ–ã€‚æ›´æ–°<code>bower.json</code>é…ç½®æ–‡ä»¶æ¥åŒ…å«æ–°çš„ä¾èµ–ï¼š</p>
<pre><code>{
  "name": "angular-phonecat",
  "description": "A starter project for AngularJS",
  "version": "0.0.0",
  "homepage": "https://github.com/angular/angular-phonecat",
  "license": "MIT",
  "private": true,
  "dependencies": {
    "angular": "1.4.x",
    "angular-mocks": "1.4.x",
    "jquery": "~2.1.1",
    "bootstrap": "~3.1.1",
    "angular-route": "1.4.x"
  }
}
</code></pre>
<p>æ–°çš„ä¾èµ–é¡¹<code>"angular-route": "1.4.x"</code>ä¼šå‘Šè¯‰Bowerå»å®‰è£…1.4.xç‰ˆæœ¬çš„angular-routeç»„ä»¶ã€‚æˆ‘ä»¬å¿…é¡»ä½¿ç”¨Boweræ¥ä¸‹è½½ä»¥åŠå®‰è£…è¯¥ç»„ä»¶ã€‚ å¦‚æœä½ å·²ç»å…¨å±€å®‰è£…äº†bowerï¼Œä½ å¯ä»¥ä½¿ç”¨<code>bower install</code>æŒ‡ä»¤ã€‚ä½†åœ¨è¿™ä¸ªé¡¹ç›®ä¸­æˆ‘ä»¬æœ‰é¢„è®¾çš„æŒ‡ä»¤æ¥å®Œæˆç›¸åŒçš„äº‹æƒ…ï¼š</p>
<pre><code>npm install
</code></pre>
<hr>
<h2 id="-2">å¤šè§†å›¾ï¼Œè·¯ç”±ä»¥åŠå¸ƒå±€æ¨¡æ¿ <a class="header-anchor" href="#-2" aria-hidden="true">ğŸ”—</a></h2>
<p>æˆ‘ä»¬çš„åº”ç”¨æ…¢æ…¢åœ°æˆé•¿å¹¶å¼€å§‹å˜å¾—å¤æ‚èµ·æ¥äº†ã€‚åœ¨è¿™ä¸€æ­¥ä¹‹å‰ï¼Œåº”ç”¨æä¾›ç»™ç”¨æˆ·çš„åªæœ‰ä¸€ä¸ªè§†å›¾ï¼ˆæ‰€æœ‰æ‰‹æœºçš„åˆ—è¡¨ï¼‰ï¼Œå¹¶ä¸”æ‰€æœ‰æ¨¡æ¿ä»£ç éƒ½åœ¨<code>index.html</code>æ–‡ä»¶ä¸­ã€‚ç°åœ¨æˆ‘ä»¬å°†è¦ç»™åº”ç”¨æ·»åŠ ä¸€ä¸ªæ˜¾ç¤ºåˆ—è¡¨ä¸­æ‰‹æœºç»†èŠ‚çš„è§†å›¾ã€‚</p>
<p>ä¸ºäº†æ·»åŠ ç»†èŠ‚è§†å›¾ï¼Œæˆ‘ä»¬å¯ä»¥æ‰©å±•<code>index.html</code>è§†å›¾ä»¥åŒ…å«æ–°çš„æ¨¡æ¿ä»£ç ï¼Œä½†è¿™ä¹ˆåšçš„è¯é¡¹ç›®å¾ˆå¿«å°±ä¼šå˜å¾—å¼‚å¸¸ç³Ÿç³•ã€‚æ‰€ä»¥æˆ‘ä»¬å°†è¦åšçš„æ˜¯æŠŠ<code>index.html</code>å˜æˆä¸€ä¸ªâ€œå¸ƒå±€æ¨¡ç‰ˆâ€ã€‚è¿™ä¸ªæ¨¡æ¿å¯ä»¥ç†è§£ä¸ºåº”ç”¨ç¨‹åºä¸­æ‰€æœ‰å…¶å®ƒæ¨¡æ¿çš„æ¯ç‰ˆï¼Œè‡³äºå…¶å®ƒçš„â€œå±€éƒ¨æ¨¡æ¿â€åˆ™å°†æ ¹æ®å½“å‰çš„â€œè·¯ç”±â€ï¼ˆå½“å‰å±•ç¤ºç»™ç”¨æˆ·çš„è§†å›¾ï¼‰é€‰æ‹©æ€§åœ°åŠ è½½åˆ°æ¯ç‰ˆä¸­æ¥ã€‚</p>
<p>Angularçš„åº”ç”¨è·¯ç”±æ˜¯ç”±<a href="https://docs.angularjs.org/api/ngRoute/provider/$routeProvider">$routeProvider</a>å£°æ˜çš„ï¼Œå®ƒæ˜¯<a href="https://docs.angularjs.org/api/ngRoute/service/$route">$route</a>æœåŠ¡çš„æä¾›è€…ã€‚è¿™ä¸ªæœåŠ¡çš„ç›®çš„æ˜¯è®©æ§åˆ¶å™¨ï¼Œè§†å›¾æ¨¡ç‰ˆä»¥åŠå½“å‰æµè§ˆå™¨URLåœ°å€ä¹‹é—´çš„è¿æ¥å˜å¾—æ›´ç®€å•ä¸€äº›ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½æ¥å®ç°<a href="http://en.wikipedia.org/wiki/Deep_linking">æ·±åº¦é“¾æ¥</a>ï¼Œä»è€Œå…è®¸ç”¨æˆ·ä½¿ç”¨æµè§ˆå™¨çš„å‰è¿›åé€€ä»¥åŠä¹¦ç­¾ç­‰åŠŸèƒ½ã€‚</p>
<h2 id="-3">ä¾èµ–æ³¨å…¥ï¼Œæ³¨å…¥å™¨å’Œæä¾›è€… <a class="header-anchor" href="#-3" aria-hidden="true">ğŸ”—</a></h2>
<p>æ­£å¦‚æˆ‘ä»¬æ‰€çŸ¥ï¼Œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æ˜¯AngularJSçš„æ ¸å¿ƒï¼Œæ‰€ä»¥å¯¹å…¶å·¥ä½œåŸç†ç¨åŠ ç†è§£æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ åœ¨åº”ç”¨ç¨‹åºè¢«å¼•å¯¼çš„æ—¶å€™ï¼ŒAngularä¼šåˆ›å»ºä¸€ä¸ªæ³¨å…¥å™¨ï¼Œå®ƒä¼šå¯»æ‰¾å¹¶ä¸”æ³¨å…¥æ‰€æœ‰è¢«åº”ç”¨ç¨‹åºæ‰€éœ€æ±‚çš„æœåŠ¡ã€‚æ³¨å…¥å™¨æœ¬èº«å®Œå…¨ä¸çŸ¥é“è¯¸å¦‚<code>$http</code>æˆ–è€…<code>$route</code>çš„æœåŠ¡å…·ä½“åšäº†äº›ä»€ä¹ˆã€‚å®é™…ä¸Šï¼Œåœ¨è¢«æ­£ç¡®é…ç½®ä¹‹å‰ï¼Œæ³¨å…¥å™¨ç”šè‡³ä¸çŸ¥é“è¿™äº›æœåŠ¡æ˜¯å¦å­˜åœ¨ã€‚ æ³¨å…¥å™¨åªæ˜¯æŒ‰éƒ¨å°±ç­åœ°åšäº†ä»¥ä¸‹äº‹æƒ…ï¼š</p>
<ul>
<li>è¯»å–åº”ç”¨æ‰€å£°æ˜çš„æ¨¡å—</li>
<li>æ³¨å†Œæ‰€æœ‰åœ¨æ¨¡å—å£°æ˜ä¸­å®šä¹‰çš„æä¾›è€…ï¼ˆProviderï¼‰</li>
<li>å½“éœ€è¦çš„æ—¶å€™ï¼Œç»™æ¨¡å—æ³¨å…¥æŒ‡å®šçš„å‡½æ•°ä»¥åŠä»»ä½•éœ€è¦çš„ä¾èµ–ï¼ˆæœåŠ¡ï¼‰ï¼Œå®ƒä»¬å°†è¢«æä¾›è€…æ‡’åŠ è½½</li>
</ul>
<p>æä¾›è€…æ˜¯ä¸€ä¸ªæä¾›ï¼ˆåˆ›å»ºï¼‰æœåŠ¡å®ä¾‹å¹¶ä¸”æš´éœ²é…ç½®æ¥å£ä»¥æ§åˆ¶æœåŠ¡çš„åˆ›å»ºè¿‡ç¨‹ä¸å®é™…è¡Œä¸ºçš„å¯¹è±¡ã€‚å¯¹äº<code>$route</code>æœåŠ¡è€Œè¨€ï¼Œ<code>$routeProvider</code>æš´éœ²çš„APIå…è®¸ä½ ä¸ºè‡ªå·±çš„åº”ç”¨å®šä¹‰è·¯ç”±ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæä¾›è€…åªèƒ½å¤Ÿæ³¨å…¥åˆ°<code>config</code>å‡½æ•°å†…ã€‚å› æ­¤ä½ ä¸èƒ½ç»™<code>PhoneListCtrl</code>æ³¨å…¥<code>$routeProvider</code></p>
</blockquote>
<p>Angularæ¨¡å—é€šè¿‡ç§»é™¤åº”ç”¨çš„å…¨å±€çŠ¶æ€ä»¥åŠæä¾›é…ç½®æ³¨å…¥å™¨çš„æ–¹æ³•æ¥è§£å†³ä»¥ä¸Šé—®é¢˜ã€‚ä¸AMDæˆ–è€…require.jsæˆªç„¶ç›¸åçš„æ˜¯ï¼ŒAngularæ¨¡å—å¹¶æ²¡æœ‰å°è¯•å»è§£å†³è„šæœ¬åŠ è½½é¡ºåºä»¥åŠè„šæœ¬æ‡’åŠ è½½çš„é—®é¢˜ã€‚è¿™äº›ç›®æ ‡éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼ŒåŒæ—¶æ‰€æœ‰çš„æ¨¡å—ç³»ç»Ÿéƒ½èƒ½å…±å­˜å¹¶ä¸”å®ç°å®ƒä»¬çš„ç›®æ ‡ã€‚ æŸ¥çœ‹<a href="https://github.com/angular/angular.js/wiki/Understanding-Dependency-Injection">ç†è§£ä¾èµ–æ³¨å…¥</a>æ¥æ·±å…¥äº†è§£Angularçš„DIç³»ç»Ÿã€‚</p>
<hr>
<h2 id="-4">æ¨¡æ¿ <a class="header-anchor" href="#-4" aria-hidden="true">ğŸ”—</a></h2>
<p><code>$route</code>æœåŠ¡é€šå¸¸ç»“åˆ<a href="https://docs.angularjs.org/api/ngRoute/directive/ngView">ngView</a>æŒ‡ä»¤ä½¿ç”¨ã€‚<code>ngView</code>æŒ‡ä»¤çš„ä½œç”¨æ˜¯æ ¹æ®å½“å‰è·¯ç”±å°†è§†å›¾æ¨¡ç‰ˆåŠ è½½åˆ°å¸ƒå±€æ¨¡æ¿ä¸­å»ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä»Angular 1.2ç‰ˆæœ¬å¼€å§‹ï¼Œ<code>ngRoute</code>ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œå¿…é¡»è¦é¢å¤–åŠ è½½<code>angular-route.js</code>æ–‡ä»¶ï¼Œæˆ‘ä»¬åˆšæ‰å·²ç»é€šè¿‡Bowerä¸‹è½½äº†å®ƒ</p>
</blockquote>
<p><code>app/index.html</code>ï¼š</p>
<pre><code>&lt;!doctype html&gt;
&lt;html lang="en" ng-app="phonecatApp"&gt;
&lt;head&gt;
...
  &lt;script src="bower_components/angular/angular.js"&gt;&lt;/script&gt;
  &lt;script src="bower_components/angular-route/angular-route.js"&gt;&lt;/script&gt;
  &lt;script src="js/app.js"&gt;&lt;/script&gt;
  &lt;script src="js/controllers.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

  &lt;div ng-view&gt;&lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>æˆ‘ä»¬ç»™indexæ¨¡æ¿æ·»åŠ äº†ä¸¤ä¸ª<code>&lt;script&gt;</code>æ ‡ç­¾æ¥ä¸ºåº”ç”¨ç¨‹åºåŠ è½½JavaScriptæ–‡ä»¶ï¼š</p>
<ul>
<li><code>angular-route.js</code>ï¼šå®šä¹‰äº†Angularçš„<code>ngRoute</code>æ¨¡å—ï¼Œå®ƒå°†ç»™æˆ‘ä»¬æä¾›è·¯ç”±åŠŸèƒ½</li>
<li><code>app.js</code>ï¼šè¿™ä¸ªæ–‡ä»¶ç°åœ¨å°†æ‹…ä»»åº”ç”¨çš„è·¯ç”±æ¨¡å—</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬æŠŠä¹‹å‰<code>index.html</code>æ¨¡æ¿ä¸­çš„å¤§éƒ¨åˆ†ä»£ç éƒ½ç§»é™¤äº†ï¼Œå–è€Œä»£ä¹‹çš„åªæœ‰ä¸€ä¸ªå¸¦æœ‰<code>ng-view</code>æ ‡ç­¾çš„divå…ƒç´ ã€‚ç§»é™¤çš„ä»£ç è¢«ç§»åŠ¨åˆ°äº†<code>phone-list.html</code>æ¨¡æ¿ä¸­å»ï¼š</p>
<p><code>app/partials/phone-list.html</code>ï¼š</p>
<pre><code>&lt;div class="container-fluid"&gt;
  &lt;div class="row"&gt;
    &lt;div class="col-md-2"&gt;
      &lt;!--Sidebar content--&gt;

      Search: &lt;input ng-model="query"&gt;
      Sort by:
      &lt;select ng-model="orderProp"&gt;
        &lt;option value="name"&gt;Alphabetical&lt;/option&gt;
        &lt;option value="age"&gt;Newest&lt;/option&gt;
      &lt;/select&gt;

    &lt;/div&gt;
    &lt;div class="col-md-10"&gt;
      &lt;!--Body content--&gt;

      &lt;ul class="phones"&gt;
        &lt;li ng-repeat="phone in phones | filter:query | orderBy:orderProp" class="thumbnail"&gt;
          &lt;a href="#/phones/{{phone.id}}" class="thumb"&gt;&lt;img ng-src="{{phone.imageUrl}}"&gt;&lt;/a&gt;
          &lt;a href="#/phones/{{phone.id}}"&gt;{{phone.name}}&lt;/a&gt;
          &lt;p&gt;{{phone.snippet}}&lt;/p&gt;
        &lt;/li&gt;
      &lt;/ul&gt;

    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>åŒæ—¶æˆ‘ä»¬ç»™æ‰‹æœºè¯¦ç»†è§†å›¾ä¸´æ—¶æ·»åŠ äº†ä¸€ä¸ªç®€å•çš„æ¨¡æ¿ï¼š</p>
<p><code>app/partials/phone-detail.html</code>ï¼š</p>
<pre><code>TBD: detail view for &lt;span&gt;{{phoneId}}&lt;/span&gt;
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†<code>phoneId</code>è¡¨è¾¾å¼ï¼Œè¿™å°†åœ¨<code>PhoneDetailCtrl</code>ä¸­å®šä¹‰ã€‚</p>
<hr>
<h2 id="app">Appæ¨¡å— <a class="header-anchor" href="#app" aria-hidden="true">ğŸ”—</a></h2>
<p>ä¸ºäº†å®Œå–„åº”ç”¨ç¨‹åºçš„æ¶æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†<code>ngRoute</code>æ¨¡å—ï¼Œå¹¶ä¸”å°†æ§åˆ¶å™¨éƒ½ç§»åŠ¨åˆ°äº†å®ƒä»¬è‡ªå·±æ‰€å±çš„æ¨¡å—<code>phonecatControllers</code>å†…ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ã€‚ æˆ‘ä»¬ç»™<code>index.html</code>æ·»åŠ äº†ä¸€ä¸ª<code>angular-route.js</code>å¼•ç”¨ï¼ŒåŒæ—¶åœ¨<code>controllers.js</code>&nbsp;ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<code>phonecatControllers</code>&nbsp;æ¨¡å—ã€‚ä½†æˆ‘ä»¬æ‰€è¦åšçš„å°†ä¸ä»…é™äºæ­¤ã€‚æˆ‘ä»¬éœ€è¦ç»™åº”ç”¨æ·»åŠ æ¨¡å—ä¾èµ–ã€‚é€šè¿‡åœ¨phonecatAppä¸­åˆ—å‡ºè¿™ä¸¤ä¸ªæ¨¡å—ä½œä¸ºä¾èµ–ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ƒä»¬æä¾›çš„æŒ‡ä»¤å’ŒæœåŠ¡äº†ã€‚</p>
<p><code>app/js/app.js</code>ï¼š</p>
<pre><code>var phonecatApp = angular.module('phonecatApp', [
  'ngRoute',
  'phonecatControllers'
]);

...
</code></pre>
<p>æ³¨æ„ä¼ å…¥åˆ°<code>angular.module</code>æ–¹æ³•ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°<code>['ngRoute', 'phonecatControllers']</code>ï¼Œè¿™ä¸ªæ•°ç»„ä¸­åˆ—å‡ºçš„æ˜¯<code>phonecatApp</code>å°†è¦ä¾èµ–åˆ°çš„æ¨¡å—ã€‚</p>
<pre><code>...

phonecatApp.config(['$routeProvider',
  function($routeProvider) {
    $routeProvider.
      when('/phones', {
        templateUrl: 'partials/phone-list.html',
        controller: 'PhoneListCtrl'
      }).
      when('/phones/:phoneId', {
        templateUrl: 'partials/phone-detail.html',
        controller: 'PhoneDetailCtrl'
      }).
      otherwise({
        redirectTo: '/phones'
      });
  }]);
</code></pre>
<p>åœ¨<code>phonecatApp.config()</code>æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è¯·æ±‚ç»™é…ç½®æ–¹æ³•æ³¨å…¥<code>$routeProvider</code>ï¼Œå¹¶ä½¿ç”¨<code>$routeProvider.when()</code>æ–¹æ³•æ¥å®šä¹‰æˆ‘ä»¬çš„è·¯ç”±ã€‚ æˆ‘ä»¬çš„åº”ç”¨è·¯ç”±å®šä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>when('/phones')</code>ï¼šå½“URLåŒ¹é…åˆ°<code>/phones</code>æ—¶ï¼Œé¡µé¢å°†ä¼šæ˜¾ç¤ºæ‰‹æœºåˆ—è¡¨è§†å›¾ã€‚Angularä¼šä½¿ç”¨<code>phone-list.html</code>æ¨¡æ¿å’Œ<code>PhoneListCtrl</code>æ§åˆ¶å™¨æ¥æ„é€ è¿™ä¸ªå®ƒ</li>
<li><code>when('/phones/:phoneId')</code>ï¼šå½“URLåŒ¹é…åˆ°<code>/phones/:phoneId</code>ï¼ˆ<code>:phoneId</code>æ˜¯URLçš„ä¸€ä¸ªå‚æ•°ï¼‰æ—¶ï¼Œé¡µé¢å°†ä¼šæ˜¾ç¤ºæ‰‹æœºè¯¦ç»†è§†å›¾ã€‚ Angularä¼šä½¿ç”¨<code>phone-detail.html</code>æ¨¡æ¿å’Œ<code>PhoneDetailCtrl</code>æ¥æ„é€ å®ƒ</li>
<li><code>otherwise({redirectTo: '/phones'})</code>ï¼šå½“æµè§ˆå™¨åœ°å€æ²¡æœ‰åŒ¹é…ä¸Šæˆ‘ä»¬å®šä¹‰çš„è·¯ç”±æ—¶é‡å®šå‘åˆ°<code>/phones</code></li>
</ul>
<p>æˆ‘ä»¬å¤ç”¨äº†åœ¨å‰é¢çš„æ•™ç¨‹ä¸­æ„å»ºçš„<code>PhoneListCtrl</code>æ§åˆ¶å™¨ï¼Œå¹¶ä¸”åœ¨<code>app/js/controllers.js</code>æ–‡ä»¶ä¸­ä¸ºæ‰‹æœºè¯¦ç»†è§†å›¾åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½çš„<code>PhoneDetailCtrl</code>æ§åˆ¶å™¨ã€‚ æ³¨æ„åœ¨ç¬¬äºŒæ¡è·¯ç”±å®šä¹‰ä¸­ä½¿ç”¨åˆ°çš„<code>:phoneId</code>å‚æ•°ã€‚<code>$route</code>æœåŠ¡ä¼šå°†<code>/phones/:phoneId</code>å£°æ˜å½“æˆä¸€ä¸ªæ¨¡æ¿æ¥ä½¿ç”¨ã€‚æ‰€æœ‰ä½¿ç”¨<code>:</code>å‰ç¼€å£°æ˜çš„å˜é‡éƒ½ä¼šè¢«æå–åˆ°<code>$routeParams</code>å¯¹è±¡ä¸­å»ã€‚</p>
<hr>
<h2 id="-5">æ§åˆ¶å™¨ <a class="header-anchor" href="#-5" aria-hidden="true">ğŸ”—</a></h2>
<p><code>app/js/controllers.js</code>ï¼š</p>
<pre><code>var phonecatControllers = angular.module('phonecatControllers', []);

phonecatControllers.controller('PhoneListCtrl', ['$scope', '$http',
  function ($scope, $http) {
    $http.get('phones/phones.json').success(function(data) {
      $scope.phones = data;
    });

    $scope.orderProp = 'age';
  }]);

phonecatControllers.controller('PhoneDetailCtrl', ['$scope', '$routeParams',
  function($scope, $routeParams) {
    $scope.phoneId = $routeParams.phoneId;
  }]);
</code></pre>
<p>æ³¨æ„åˆ°æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>phonecatControllers</code>çš„æ–°æ¨¡å—ã€‚å¯¹ä¸€äº›å°å‹AngularJSåº”ç”¨è€Œè¨€æˆ–è®¸ä¸€ä¸ªæ¨¡å—å°±å¤Ÿç”¨äº†ï¼Œä½†æ˜¯éšç€åº”ç”¨çš„å¢é•¿ï¼Œå°†ä»£ç é‡æ„åˆ°ä¸åŒçš„æ¨¡å—ä¸­å»æ˜¯éå¸¸æ™®éçš„åšæ³•ã€‚å¯¹å¤§å‹åº”ç”¨æ¥è¯´ï¼Œä½ å¾ˆå¯èƒ½ä¼šä¸ºåº”ç”¨çš„æ¯ä¸€ä¸ªä¸»è¦åŠŸèƒ½éƒ½åˆ›å»ºä¸åŒçš„æ¨¡å—ã€‚ å› ä¸ºæˆ‘ä»¬çš„æ•™å­¦åº”ç”¨ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå°ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæ‰€æœ‰çš„æ§åˆ¶å™¨æ·»åŠ åˆ°<code>phonecatControllers</code>æ¨¡å—ä¸­å°±å®Œäº‹äº†ã€‚</p>
<hr>
<h2 id="-6">æµ‹è¯• <a class="header-anchor" href="#-6" aria-hidden="true">ğŸ”—</a></h2>
<p>ä¸ºäº†éªŒè¯åº”ç”¨çš„æ­£ç¡®æ€§ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€äº›ç«¯åˆ°ç«¯æµ‹è¯•æ¥éªŒè¯å½“URLå‘ç”Ÿå˜åŒ–æ—¶åº”ç”¨æ˜¯å¦æ¸²æŸ“äº†æ­£ç¡®çš„è§†å›¾ã€‚</p>
<pre><code>...
   it('should redirect index.html to index.html#/phones', function() {
    browser.get('app/index.html');
    browser.getLocationAbsUrl().then(function(url) {
        expect(url).toEqual('/phones');
      });
  });

  describe('Phone list view', function() {
    beforeEach(function() {
      browser.get('app/index.html#/phones');
    });
...

  describe('Phone detail view', function() {

    beforeEach(function() {
      browser.get('app/index.html#/phones/nexus-s');
    });


    it('should display placeholder page with phoneId', function() {
      expect(element(by.binding('phoneId')).getText()).toBe('nexus-s');
    });
  });
</code></pre>
<p>ä½ å¯ä»¥é€šè¿‡æ‰§è¡Œ<code>npm run protractor</code>æ¥è§‚å¯Ÿæµ‹è¯•è¿è¡Œ</p>
<h2 id="-7">è¯¾å¤–æ‰©å±• <a class="header-anchor" href="#-7" aria-hidden="true">ğŸ”—</a></h2>
<p>å°è¯•ç»™<code>index.html</code>æ·»åŠ ä¸€ä¸ª<code>{{orderProp}}</code>ç»‘å®šï¼Œä½ ä¼šå‘ç°å³ä½¿æ­£å¤„åœ¨æ‰‹æœºåˆ—è¡¨è§†å›¾ä¸­å®ƒä¹Ÿæ²¡æœ‰å¼•å‘ä»»ä½•æ”¹å˜ã€‚è¿™æ˜¯å› ä¸º<code>orderProp</code>æ¨¡å‹åªåœ¨<code>PhoneListCtrl</code>ç®¡ç†çš„ä½œç”¨åŸŸä¸­å¯è§ã€‚å¦‚æœä½ æŠŠåŒæ ·çš„ç»‘å®šæ·»åŠ åˆ°<code>phone-list.html</code>æ¨¡æ¿å†…å®ƒå°±ä¼šå¦‚é¢„æœŸä¸€èˆ¬åœ°å·¥ä½œäº†ã€‚</p>
<h2 id="-8">æ€»ç»“ <a class="header-anchor" href="#-8" aria-hidden="true">ğŸ”—</a></h2>
<p>æ—¢ç„¶å·²ç»è®¾ç½®å¥½äº†è·¯ç”±ä¸æ‰‹æœºåˆ—è¡¨è§†å›¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‡†å¤‡é€šè¿‡<a href="/p/angular-tutorial-more-templating/">step 8</a>æ¥å®ç°è¯¦ç»†è§†å›¾äº†ã€‚</p>
</div> <hr data-v-f233b600=""> <nav data-v-7144c3e4="" data-v-f233b600=""><ul data-v-7144c3e4="" class="pager"><li data-v-7144c3e4="" class="previous"><a data-v-7144c3e4="" href="/p/angular-tutorial-templating-links-and-images" class=""><i data-v-7144c3e4="" class="glyphicon glyphicon-chevron-left"></i> Angular æ•™ç¨‹ï¼šæ¨¡æ¿åŒ–çš„é“¾æ¥ä¸å›¾ç‰‡
      </a></li> <li data-v-7144c3e4="" class="next"><a data-v-7144c3e4="" href="/p/angular-tutorial-more-templating" class="">
        Angular æ•™ç¨‹ï¼šæ›´å¤šçš„æ¨¡æ¿ <i data-v-7144c3e4="" class="glyphicon glyphicon-chevron-right"></i></a></li></ul></nav> <hr data-v-f233b600=""> <div data-v-1a6fe007="" data-v-f233b600="" id="disqus_thread"></div></section></section></div></div></div></div> <section data-v-f9dc3034="" data-v-79039cdb="" class="page-footer"><div data-v-f9dc3034="" class="container-fluid"><div data-v-f9dc3034="" class="row"><div data-v-f9dc3034="" class="col-xs-12"><p data-v-f9dc3034=""><span data-v-f9dc3034="">Links:</span> <!----> <a data-v-f9dc3034="" href="https://blog.aquariuslt.com/" target="_blank">Aquariuslt</a><span data-v-f9dc3034="">&nbsp;/</span> <a data-v-f9dc3034="" href="https://lz5z.com" target="_blank">Leo's Blog</a></p></div></div> <div data-v-f9dc3034="" class="row"><div data-v-f9dc3034="" class="col-xs-12"><a data-v-f9dc3034="" href="https://wxsm.space">Â© 2018 WXSM</a> <span data-v-f9dc3034="">/</span> <a data-v-f9dc3034="" href="/feed.xml" rel="nofollow" target="_blank">FEED</a> <span data-v-f9dc3034="">/</span> <a data-v-f9dc3034="" title="LICENSE" href="https://creativecommons.org/licenses/by/4.0/" rel="nofollow">CC BY 4.0</a></div></div></div></section></section></section>
<div id="nprogress" style="transition: all 200ms linear; -webkit-transition: all 200ms linear; opacity: 0;"><div class="bar" role="bar" style="transition: all 200ms ease; -webkit-transition: all 200ms ease; -webkit-transform: translate3d(0%, 0px, 0px);"><div class="peg"></div></div></div><iframe style="display: none;"></iframe><div class="adsbox">&nbsp;</div></body></html>
