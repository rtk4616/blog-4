<!DOCTYPE html><html class="nprogress-busy"><head><meta charset="utf-8"><meta name="google-site-verification" content="ekuL5J7xK1IdFtP13v3KxpuGKnYS1oCT9PvZdjYm8Eg"><meta name="viewport" content="user-scalable=no,width=device-width,initial-scale=1,maximum-scale=1"><link rel="shortcut icon" type="image/png" href="/static/favicon.png"><link rel="apple-touch-icon" sizes="200x200" href="/static/favicon-iphone.png"><title>wxsm's space - D3 Note - Scale</title><meta name="description" content="wxsms's personal blog."><meta name="keywords" content="Blog,JavaScript,HTML,CSS,Vue,Bootstrap"><link href="/static/css/app.c460d3b13d6d7ce0c63faa74a9023a8f.css" rel="stylesheet"><script type="text/javascript" src="/static/js/manifest.68263eefe155d055bfa0.js"></script><script type="text/javascript" src="/static/js/vendor.19a2875ac58b9bf76cc9.js"></script><script type="text/javascript" src="/static/js/app.6317672e36f60ab5ad32.js"></script><script async="" src="https://www.google-analytics.com/analytics.js" charset="utf8"></script><script async="" src="https://www.google-analytics.com/analytics.js" charset="utf8"></script><script type="text/javascript" charset="utf-8" async="" src="/static/js/0.24af7fe1e27d3b16bd28.js"></script><script type="text/javascript" charset="utf-8" async="" src="/static/js/4.f6eaab3002dc8add016f.js"></script><script type="text/javascript" charset="utf-8" async="" src="/static/js/0.24af7fe1e27d3b16bd28.js"></script><script type="text/javascript" charset="utf-8" async="" src="/static/js/1.3d038e42bb029d58fb1c.js"></script><script type="text/javascript" async="" id="embed-disqus" data-timestamp="1539144390114" src="//wxsm.disqus.com/embed.js"></script></head><body><section id="app"><section data-v-6a2c05ce="" style="display: none;"></section> <aside data-v-0044a876="" class=""><div data-v-0044a876="" class="brand"><h4 data-v-0044a876="" class="brand-link"><a data-v-0044a876="" href="/" class="router-link-active">wxsm's space</a></h4></div> <div data-v-0044a876="" class="search-container"><form data-v-e01410e2="" data-v-0044a876="" class="form-inline search-form-box"><div data-v-e01410e2="" class="form-group"><input data-v-e01410e2="" type="search" placeholder="Search..." required="required" minlength="2" class="form-control"></div></form></div> <div data-v-0044a876="" class="nav-container"><div data-v-0044a876="" class="nav-div"><ul data-v-0044a876="" role="tablist" class="nav nav-pills nav-stacked"><li data-v-0044a876="" role="presentation"><a data-v-0044a876="" href="/p" class="router-link-active btn btn-link" role="button">Archive</a></li><li data-v-0044a876="" role="presentation"><a data-v-0044a876="" href="/t" class="btn btn-link" role="button">Tags</a></li><li data-v-0044a876="" role="presentation"><a data-v-0044a876="" href="/g" class="btn btn-link" role="button">Guestbook</a></li><li data-v-0044a876="" role="presentation"><a data-v-0044a876="" href="/a" class="btn btn-link" role="button">About</a></li></ul></div> <!----></div></aside> <section data-v-79039cdb="" class="page"><div data-v-79039cdb="" class="page-body"><button data-v-01aba251="" data-v-79039cdb="" type="button" class="navbar-toggle collapsed"><span data-v-01aba251="" class="sr-only">Toggle navigation</span> <span data-v-01aba251="" class="icon-bar"></span> <span data-v-01aba251="" class="icon-bar"></span> <span data-v-01aba251="" class="icon-bar"></span></button> <div data-v-79039cdb="" class="container-fluid"><div data-v-79039cdb="" class="row"><div data-v-79039cdb="" class="col-xs-12"><section data-v-f233b600="" data-v-79039cdb=""><h1 data-v-f233b600="">D3 Note - Scale</h1> <section data-v-f233b600="" id="post-content"><section data-v-19e352bd="" data-v-f233b600=""><div data-v-19e352bd="" class="meta-block"><i data-v-19e352bd="" class="glyphicon glyphicon-calendar"></i> <span data-v-19e352bd="">November 22, 2016</span></div> <div data-v-19e352bd="" class="meta-block"><a data-v-3cd447cb="" data-v-19e352bd="" href="/t#D3" class="label-tag"><span data-v-3cd447cb="" class="label label-warning">D3</span></a></div></section> <div data-v-f233b600=""><p>ä¹‹å‰åšçš„æŸ±çŠ¶å›¾ä¾‹å­ï¼š</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> data = [<span class="hljs-number">250</span>, <span class="hljs-number">210</span>, <span class="hljs-number">170</span>, <span class="hljs-number">100</span>, <span class="hljs-number">190</span>]

<span class="hljs-keyword">let</span> rectWidth = <span class="hljs-number">25</span>

svg.selectAll(<span class="hljs-string">'rect'</span>)
 .data(data)
 .enter()
 .append(<span class="hljs-string">'rect'</span>)
 .attr(<span class="hljs-string">'y'</span>, (d, i) =&gt; height - d)
 .attr(<span class="hljs-string">'x'</span>, (d, i) =&gt; i * rectWidth)
 .attr(<span class="hljs-string">'height'</span>, d =&gt; d)
 .attr(<span class="hljs-string">'width'</span>, rectWidth - <span class="hljs-number">2</span>)
 .attr(<span class="hljs-string">'fill'</span>, <span class="hljs-string">'steelblue'</span>)
</code></pre>
<p>æœ‰ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå°±æ˜¯æ²¡æœ‰æ¯”ä¾‹å°ºçš„æ¦‚å¿µï¼ŒæŸ±çŠ¶å›¾çš„é«˜åº¦å®Œå…¨ç”±æ•°æ®è½¬æ¢æˆåƒç´ å€¼æ¥æ¨¡æ‹Ÿã€‚è¿™æ˜æ˜¾æ˜¯ä¸ç§‘å­¦çš„ï¼šå¦‚æœæ•°æ®çš„å€¼è¿‡å°æˆ–è¿‡å¤§ï¼Œä½œå‡ºæ¥çš„å›¾å°±ä¼šå¾ˆå¥‡æ€ªï¼ŒåŒæ—¶ä¹Ÿæ— æ³•åšåˆ°éçº¿æ€§çš„æ˜ å°„ã€‚</p>
<p>å°±è·Ÿåœ°å›¾éœ€è¦æ¯”ä¾‹å°ºä¸€æ ·ï¼Œç»å¤§å¤šæ•°çš„æ•°æ®å›¾è¡¨ä¹Ÿéœ€è¦æ¯”ä¾‹å°ºã€‚</p>
<blockquote>
<p>Scales are a convenient abstraction for a fundamental task in visualization: mapping a dimension of abstract data to a visual representation.</p>
</blockquote>
<p><strong>æ¯”ä¾‹å°º - Scale - â€œå°†æŸä¸ªç»´åº¦çš„æŠ½è±¡æ•°æ®åšå¯è§†åŒ–æ˜ å°„â€</strong></p>
<p>è‡³äºå¯è§†åŒ–æ˜ å°„çš„å…·ä½“å®ç°ï¼Œ<code>d3-scale</code> æ¨¡å—æä¾›äº†è®¸å¤šæ–¹æ¡ˆï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li>Continuous Scalesï¼ˆè¿ç»­æ˜ å°„ï¼‰</li>
<li>Ordinal Scalesï¼ˆæ•£ç‚¹æ˜ å°„ï¼‰</li>
</ul>
<!--more-->
<h2 id="continuous-scales">Continuous Scales <a class="header-anchor" href="#continuous-scales" aria-hidden="true">ğŸ”—</a></h2>
<p>Continuous Scalesï¼ˆè¿ç»­æ˜ å°„ï¼‰å°†è¿ç»­çš„ã€å®šé‡çš„ <strong>Input Domain</strong>ï¼ˆå®šä¹‰åŸŸï¼‰æ˜ å°„ä¸ºä¸€ä¸ªè¿ç»­çš„ <strong>Output Range</strong>ï¼ˆå€¼åŸŸï¼‰ã€‚å¦‚æœ Range ä¹Ÿæ˜¯ä¸€ä¸ªæ•°å€¼èŒƒå›´ï¼Œé‚£ä¹ˆæ˜ å°„æ“ä½œå¯ä»¥è¢«åè½¬ï¼ˆå³ä»å€¼åŸŸåˆ°å®šä¹‰åŸŸï¼‰ã€‚</p>
<p>è¿ç»­å€¼æ˜ å°„æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œä¸èƒ½ç›´æ¥æ„é€ ã€‚å› æ­¤ï¼Œ<code>d3-scale</code> æä¾›äº†ä¸€äº›å…·ä½“å®ç°ï¼Œå¦‚çº¿æ€§ã€æ¬¡æ–¹ã€å¯¹æ•°ç­‰ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> x = d3.scaleLinear()
    .domain([<span class="hljs-number">10</span>, <span class="hljs-number">130</span>])
    .range([<span class="hljs-number">0</span>, <span class="hljs-number">960</span>]);

x(<span class="hljs-number">20</span>); <span class="hljs-comment">// 80</span>
x(<span class="hljs-number">50</span>); <span class="hljs-comment">// 320</span>
</code></pre>
<p>è¿™é‡Œæ„é€ äº†ä¸€ä¸ª <code>scaleLinear</code> ï¼ˆçº¿æ€§æ¯”ä¾‹å°ºï¼‰ï¼Œå¹¶è®¾ç½®äº†è¾“å…¥åŠè¾“å‡ºèŒƒå›´ã€‚æ„é€ å™¨å°†ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—è¾“å…¥å€¼ï¼Œå¹¶ä¸”è¿”å›å¯¹åº”çš„è¾“å‡ºå€¼ã€‚</p>
<p>å¦‚æœè¾“å…¥å€¼è¶…å‡ºäº†é¢„å®šä¹‰çš„èŒƒå›´ï¼Œé‚£ä¹ˆè‡ªç„¶è€Œç„¶åœ°ï¼Œå‡½æ•°è¿”å›çš„è¾“å‡ºå€¼ä¹Ÿä¼šè¶…å‡ºèŒƒå›´ã€‚ä½†æ˜¯ï¼ŒD3 æä¾›äº†ä¸€ä¸ªé€‰é¡¹ <code>clamp</code>, å¯ä»¥å°†è¾“å‡ºèŒƒå›´ä¿æŒåœ¨å®šä¹‰å€¼å†…ï¼š</p>
<pre><code class="language-js">x.clamp(<span class="hljs-literal">true</span>);
x(<span class="hljs-number">-10</span>); <span class="hljs-comment">// 0, clamped to range</span>
</code></pre>
<p>Output Domain é™¤äº†å¯ä»¥ä¸ºæ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒä¸œè¥¿ã€‚æ¯”å¦‚é¢œè‰²ï¼š</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> color = d3.scaleLinear()
    .domain([<span class="hljs-number">10</span>, <span class="hljs-number">100</span>])
    .range([<span class="hljs-string">"brown"</span>, <span class="hljs-string">"steelblue"</span>]);

color(<span class="hljs-number">20</span>); <span class="hljs-comment">// "#9a3439"</span>
color(<span class="hljs-number">50</span>); <span class="hljs-comment">// "#7b5167"</span>
</code></pre>
<p>åŒæ—¶ï¼ŒContinuous Scales ä¹Ÿæ”¯æŒ<strong>æ’å€¼</strong>ï¼ˆinterpolateï¼‰æ“ä½œï¼Œè¿™æ˜¯ D3 çš„å¦ä¸€ä¸ªæ¨¡å—ã€‚</p>
<h3 id="linear-scales">Linear Scales <a class="header-anchor" href="#linear-scales" aria-hidden="true">ğŸ”—</a></h3>
<p><strong>çº¿æ€§æ¯”ä¾‹å°º</strong>ï¼Œé¡¾åæ€ä¹‰ï¼Œè¾“å‡ºå€¼å¯¹äºè¾“å…¥å€¼è€Œè¨€æ˜¯çº¿æ€§å˜åŒ–çš„ã€‚</p>
<blockquote>
<p>y = ax + b</p>
</blockquote>
<h3 id="power-scales">Power Scales <a class="header-anchor" href="#power-scales" aria-hidden="true">ğŸ”—</a></h3>
<p><strong>æ¬¡æ–¹æ¯”ä¾‹å°º</strong>ï¼Œä¸ Linear Scales ç±»ä¼¼ï¼Œä½†æ˜¯éœ€è¦å¤šåŠ ä¸€ä¸ªå‚æ•°ï¼š<code>exponent</code> ï¼ˆæ¬¡æ–¹ï¼‰</p>
<blockquote>
<p>y = mx^k + b</p>
</blockquote>
<pre><code class="language-js">pow.exponent([exponent]) <span class="hljs-comment">// default 1</span>
</code></pre>
<p>åœ¨éœ€è¦åšæ¬¡æ–¹æ ¹çš„æ—¶å€™ï¼Œä½¿ <code>exponent = 0.x</code> å°±å¯ä»¥äº†ï¼Œå¯¹äº 0.5 è¿™ä¸ªç‰¹å€¼ï¼ŒD3 è¿˜æä¾›äº†å¿«æ·æ–¹å¼ï¼š<code>d3.scaleSqrt()</code>ï¼Œè¿™å°†ç›´æ¥æ„é€  <code>exponent = 0.5</code> çš„ Power Scale</p>
<h3 id="log-scales">Log Scales <a class="header-anchor" href="#log-scales" aria-hidden="true">ğŸ”—</a></h3>
<p><strong>å¯¹æ•°æ¯”ä¾‹å°º</strong>ï¼Œä¸ Power Scales ç±»ä¼¼ï¼Œå‚æ•°å˜ä¸º <code>base</code> ï¼ˆåº•æ•°ï¼‰</p>
<blockquote>
<p>y = m log(x) + b</p>
</blockquote>
<p>å› ä¸º log(0) = -âˆï¼ŒLog Scales çš„ Input Domain ä¸èƒ½å¤Ÿè·¨è¶Š 0ï¼Œå³è¦ä¹ˆå…¨ä¸ºæ­£ï¼Œè¦ä¹ˆå…¨ä¸ºè´Ÿ</p>
<h3 id="identity-scales">Identity Scales <a class="header-anchor" href="#identity-scales" aria-hidden="true">ğŸ”—</a></h3>
<p><strong>å…¨ç­‰æ¯”ä¾‹å°º</strong>ï¼Œç‰¹æ®Šçš„çº¿æ€§æ¯”ä¾‹å°ºã€‚å®šä¹‰åŸŸä¸å€¼åŸŸå®Œå…¨ç›¸ç­‰ã€‚å› æ­¤ï¼Œå®ƒçš„ <code>invert</code> æ–¹æ³•ä¹Ÿå°±æ˜¯å®ƒæœ¬èº«ã€‚</p>
<blockquote>
<p>y = x</p>
</blockquote>
<h3 id="time-scales">Time Scales <a class="header-anchor" href="#time-scales" aria-hidden="true">ğŸ”—</a></h3>
<p><strong>æ—¶é—´æ¯”ä¾‹å°º</strong>ï¼Œçº¿æ€§æ¯”ä¾‹å°ºçš„å˜ä½“ã€‚ä¾‹å­ï¼š</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> x = d3.scaleTime()
    .domain([<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>)])
    .range([<span class="hljs-number">0</span>, <span class="hljs-number">960</span>]);

x(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>,  <span class="hljs-number">5</span>)); <span class="hljs-comment">// 200</span>
x(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">16</span>)); <span class="hljs-comment">// 640</span>
x.invert(<span class="hljs-number">200</span>); <span class="hljs-comment">// Sat Jan 01 2000 05:00:00 GMT-0800 (PST)</span>
x.invert(<span class="hljs-number">640</span>); <span class="hljs-comment">// Sat Jan 01 2000 16:00:00 GMT-0800 (PST)</span>
</code></pre>
<h2 id="sequential-scales">Sequential Scales <a class="header-anchor" href="#sequential-scales" aria-hidden="true">ğŸ”—</a></h2>
<p><strong>Sequential Scales</strong> ä¸ <strong>Continuous Scales</strong> ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ï¼Œè¿™ä¸ªæ¯”ä¾‹å°ºçš„å€¼åŸŸæ˜¯ç”± <code>interpolator</code> å†³å®šçš„ï¼Œä¸å¯æ§åˆ¶ã€‚åŒæ—¶ï¼Œ<code>invert</code>, <code>range</code>, <code>rangeRound</code> ä»¥åŠ <code>interpolate</code> éƒ½ä¸å¯ç”¨ã€‚</p>
<p>D3 æä¾›äº†ä¸€ç³»åˆ—çš„é¢œè‰²æ’å€¼å™¨ï¼Œå› æ­¤å…¶åº”ç”¨åœºæ™¯å¤šä¸è¿ç»­çš„é¢œè‰²å€¼åŸŸæœ‰å…³ã€‚</p>
<h2 id="quantize-scales">Quantize Scales <a class="header-anchor" href="#quantize-scales" aria-hidden="true">ğŸ”—</a></h2>
<p><strong>Quantize Scales</strong> ä¸ <strong>Linear Scales</strong> ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ï¼Œå…¶å€¼åŸŸæ˜¯ç¦»æ•£çš„ã€‚å®šä¹‰åŸŸå°†åŸºäºå€¼åŸŸå…ƒç´ çš„ä¸ªæ•°è¢«åˆ‡å‰²ä¸º<strong>ç›¸ç­‰çš„çº¿æ®µ</strong>ï¼Œè¾“å‡ºå€¼ä¸ºçº¿æ®µåˆ°å€¼åŸŸçš„<strong>ä¸€å¯¹ä¸€æ˜ å°„</strong>ã€‚</p>
<blockquote>
<p>y = m round(x) + b</p>
</blockquote>
<p>ä¾‹å­ï¼š</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> color = d3.scaleQuantize()
    .domain([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>])
    .range([<span class="hljs-string">"brown"</span>, <span class="hljs-string">"steelblue"</span>]);

color(<span class="hljs-number">0.49</span>); <span class="hljs-comment">// "brown"</span>
color(<span class="hljs-number">0.51</span>); <span class="hljs-comment">// "steelblue"</span>
</code></pre>
<h2 id="quantile-scales">Quantile Scales <a class="header-anchor" href="#quantile-scales" aria-hidden="true">ğŸ”—</a></h2>
<p><strong>Quantile scales</strong> ä¸ <strong>Quantize Scales</strong> ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ï¼Œå…¶å€¼åŸŸæ˜¯â€œç¦»æ•£è¿ç»­çš„â€ï¼Œå³â€œ<strong>ç¦»æ•£çš„è¿ç»­ç‰‡æ®µ</strong>â€ã€‚</p>
<p>é¦–å…ˆï¼Œæ„é€ å™¨ä¼šå¯¹å®šä¹‰åŸŸè¿›è¡Œæ’åºæ“ä½œï¼Œç„¶åæ ¹æ®å€¼åŸŸå…ƒç´ çš„ä¸ªæ•°åˆ‡åˆ†ä¸º<strong>ç›¸ç­‰çš„ç‰‡æ®µ</strong>ã€‚å¦‚æœæ— æ³•ç­‰åˆ†ï¼Œå¤šä½™çš„å…ƒç´ å°†è¢«åŠ å…¥åˆ°æœ€åä¸€ç»„ã€‚</p>
<p>å¦‚ï¼š</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> quantile = d3.scaleQuantile()
  .domain([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">16</span>])
  .range([<span class="hljs-string">'blue'</span>, <span class="hljs-string">'white'</span>, <span class="hljs-string">'red'</span>]);

quantile(<span class="hljs-number">3</span>)   <span class="hljs-comment">// will output "red"</span>
quantile(<span class="hljs-number">16</span>)  <span class="hljs-comment">// will output "red"</span>
</code></pre>
<p>è§£æï¼š</p>
<p>å…¶å®šä¹‰åŸŸå°†å…ˆè¢«æ’åºï¼Œè€Œåè¢«åˆ‡åˆ†ä¸º 3 ä¸ªç‰‡æ®µï¼š<code>[1, 1], [2, 2], [3, 3, 16]</code></p>
<p>æ­¤æ—¶ï¼Œå¦‚æœæ‰§è¡Œ <code>quantile.quantiles()</code>ï¼Œå°†å¾—åˆ°ä¸€ä¸ªæ•°ç»„ <code>[2, 3]</code>ï¼Œé•¿åº¦ä¸ºå€¼åŸŸé•¿åº¦å‡ä¸€ã€‚å‡è®¾å°†å…¶èµ‹å€¼ä¸º <code>quantiles</code>ï¼Œå…¶å«ä¹‰ä¸ºï¼š</p>
<ul>
<li>å®šä¹‰åŸŸä¸­å°äº <code>quantiles[0]</code> çš„å€¼çš„ï¼Œå°†è¢«åˆ’åˆ†åˆ°ç¬¬ä¸€ä¸ªç‰‡æ®µ</li>
<li>å¤§äºç­‰äºæ•°ç»„å…ƒç´  <code>quantiles[0]</code> çš„å€¼ä½†æ˜¯å°äºæ•°ç»„å…ƒç´  <code>quantiles[1]</code> çš„å€¼çš„ï¼Œå°†è¢«åˆ’åˆ†åˆ°ç¬¬äºŒä¸ªç‰‡æ®µ</li>
<li>ä»¥æ­¤ç±»æ¨</li>
</ul>
<p>åˆ’åˆ†çº¿æ®µåï¼Œå®šä¹‰åŸŸå°±ä¸å€¼åŸŸæˆä¸ºä¸€ä¸€å¯¹åº”çš„å…³ç³»äº†ã€‚å› æ­¤å°±æœ‰äº†ä»¥ä¸Šç»“æœã€‚</p>
<h2 id="threshold-scales">Threshold Scales <a class="header-anchor" href="#threshold-scales" aria-hidden="true">ğŸ”—</a></h2>
<p><strong>Threshold scales</strong> ä¸ <strong>Quantile Scales</strong> ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ï¼Œæˆ‘ä»¬å°†å¾€ <code>domain</code> ä¸­ ç›´æ¥ä¼ å…¥ä¸å‰è€…ç±»ä¼¼çš„ <code>quantiles</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒçœŸæ­£çš„å®šä¹‰åŸŸä¸åšé™åˆ¶ï¼Œé™åˆ¶çš„æ˜¯å®ƒ<strong>åˆ’åˆ†ç‰‡æ®µçš„æ–¹å¼</strong>ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> color = d3.scaleThreshold()
    .domain([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>])
    .range([<span class="hljs-string">"red"</span>, <span class="hljs-string">"white"</span>, <span class="hljs-string">"green"</span>]);

color(<span class="hljs-number">-1</span>);   <span class="hljs-comment">// "red"</span>
color(<span class="hljs-number">0</span>);    <span class="hljs-comment">// "white"</span>
color(<span class="hljs-number">0.5</span>);  <span class="hljs-comment">// "white"</span>
color(<span class="hljs-number">1</span>);    <span class="hljs-comment">// "green"</span>
color(<span class="hljs-number">1000</span>); <span class="hljs-comment">// "green"</span>
</code></pre>
<h2 id="ordinal-scales">Ordinal Scales <a class="header-anchor" href="#ordinal-scales" aria-hidden="true">ğŸ”—</a></h2>
<p><strong>Ordinal Scales</strong>ï¼ˆæ•£ç‚¹æ˜ å°„ï¼‰</p>
<p>ä¸è¿ç»­æ˜ å°„ä¸åŒï¼Œæ•£ç‚¹æ˜ å°„æ¥å—<strong>ç¦»æ•£çš„å®šä¹‰åŸŸä¸å€¼åŸŸ</strong>ã€‚æ¯”å¦‚åœ¨ä¸€ä¸ªåšå®¢ä¸­æŠŠä¸åŒçš„æ ‡ç­¾æ˜ å°„åˆ°ä¸€ç»„é¢œè‰²ä¸Šå»ç­‰ã€‚å¦‚æœå€¼åŸŸçš„å…ƒç´ é‡æ¯”å®šä¹‰åŸŸå°‘ï¼Œé‚£ä¹ˆå€¼åŸŸä¼šâ€œé‡å¤ä½¿ç”¨â€ã€‚å¦‚ï¼š</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> ordinal = d3.scaleOrdinal()
  .domain([<span class="hljs-string">"apple"</span>, <span class="hljs-string">"orange"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"grapefruit"</span>])
  .range([<span class="hljs-number">0</span>, <span class="hljs-number">100</span>]);

ordinal(<span class="hljs-string">"apple"</span>); <span class="hljs-comment">// 0</span>
ordinal(<span class="hljs-string">"orange"</span>); <span class="hljs-comment">// 100</span>
ordinal(<span class="hljs-string">"banana"</span>); <span class="hljs-comment">// 0</span>
ordinal(<span class="hljs-string">"grapefruit"</span>); <span class="hljs-comment">// 100</span>
</code></pre>
<h3 id="band-scales">Band Scales <a class="header-anchor" href="#band-scales" aria-hidden="true">ğŸ”—</a></h3>
<p><strong>Band Scales</strong> ä¸ <strong>Ordinal Scales</strong> ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ï¼Œå…¶<strong>å€¼åŸŸæ˜¯è¿ç»­çš„æ•°å€¼</strong>ã€‚ä¾‹å­ï¼š</p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> band = d3.scaleBand()
  .domain([<span class="hljs-string">"apple"</span>, <span class="hljs-string">"orange"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"grapefruit"</span>])
  .range([<span class="hljs-number">0</span>, <span class="hljs-number">100</span>]);

band(<span class="hljs-string">"apple"</span>); <span class="hljs-comment">// 0</span>
band(<span class="hljs-string">"orange"</span>); <span class="hljs-comment">// 25</span>
band(<span class="hljs-string">"banana"</span>); <span class="hljs-comment">// 50</span>
band(<span class="hljs-string">"grapefruit"</span>); <span class="hljs-comment">// 75</span>
</code></pre>
<p>Band Scales æä¾›äº†ä¸€äº›å®ç”¨æ–¹æ³•ï¼Œç”¨äºæ§åˆ¶æ˜ å°„çš„ç»“æœã€‚æ¯”å¦‚è·å– Band Widthï¼Œå¼ºåˆ¶è½¬æ¢æ•´æ•°ï¼Œæ·»åŠ  Padding ç­‰ã€‚</p>
<h3 id="point-scales">Point Scales <a class="header-anchor" href="#point-scales" aria-hidden="true">ğŸ”—</a></h3>
<p><strong>Point Scales</strong> æ˜¯ <strong>Band Scales</strong> çš„ç‰¹ä¾‹ï¼Œå®ƒçš„ <strong>Band Width å§‹ç»ˆä¸º 0</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">let</span> point = d3.scalePoint()
  .domain([<span class="hljs-string">"apple"</span>, <span class="hljs-string">"orange"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"grapefruit"</span>])
  .range([<span class="hljs-number">0</span>, <span class="hljs-number">100</span>]);

point(<span class="hljs-string">"apple"</span>); <span class="hljs-comment">// 0</span>
point(<span class="hljs-string">"orange"</span>); <span class="hljs-comment">// 33.333333333333336</span>
point(<span class="hljs-string">"banana"</span>); <span class="hljs-comment">// 66.66666666666667</span>
point(<span class="hljs-string">"grapefruit"</span>); <span class="hljs-comment">// 100</span>
</code></pre>
</div> <hr data-v-f233b600=""> <nav data-v-7144c3e4="" data-v-f233b600=""><ul data-v-7144c3e4="" class="pager"><li data-v-7144c3e4="" class="previous"><a data-v-7144c3e4="" href="/p/static-blog-built-with-vue" class=""><i data-v-7144c3e4="" class="glyphicon glyphicon-chevron-left"></i> Static Blog Built with Vue
      </a></li> <li data-v-7144c3e4="" class="next"><a data-v-7144c3e4="" href="/p/d3-note-interpolate" class="">
        D3 Note - Interpolate <i data-v-7144c3e4="" class="glyphicon glyphicon-chevron-right"></i></a></li></ul></nav> <hr data-v-f233b600=""> <div data-v-1a6fe007="" data-v-f233b600="" id="disqus_thread"><i data-v-1a6fe007="" class="glyphicon glyphicon-refresh icon-spin"></i> <span data-v-1a6fe007="">Loading Disqus......</span></div></section></section></div></div></div></div> <section data-v-f9dc3034="" data-v-79039cdb="" class="page-footer"><div data-v-f9dc3034="" class="container-fluid"><div data-v-f9dc3034="" class="row"><div data-v-f9dc3034="" class="col-xs-12"><p data-v-f9dc3034=""><span data-v-f9dc3034="">Links:</span> <!----> <a data-v-f9dc3034="" href="https://blog.aquariuslt.com/" target="_blank">Aquariuslt</a><span data-v-f9dc3034="">&nbsp;/</span> <a data-v-f9dc3034="" href="https://lz5z.com" target="_blank">Leo's Blog</a></p></div></div> <div data-v-f9dc3034="" class="row"><div data-v-f9dc3034="" class="col-xs-12"><a data-v-f9dc3034="" href="https://wxsm.space">Â© 2018 WXSM</a> <span data-v-f9dc3034="">/</span> <a data-v-f9dc3034="" href="/feed.xml" rel="nofollow" target="_blank">FEED</a> <span data-v-f9dc3034="">/</span> <a data-v-f9dc3034="" title="LICENSE" href="https://creativecommons.org/licenses/by/4.0/" rel="nofollow">CC BY 4.0</a></div></div></div></section></section></section>
<div id="nprogress" style="transition: none; -webkit-transition: none; opacity: 1;"><div class="bar" role="bar" style="transition: all 200ms ease; -webkit-transition: all 200ms ease; -webkit-transform: translate3d(0%, 0px, 0px);"><div class="peg"></div></div></div></body></html>
